"use strict";angular.module("aquiferiumApp",["ngCookies","ngResource","ngSanitize","ngRoute","ngAnimate","angular-carousel","angular-parallax","videosharing-embed","d3-map","d3-visualizations"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/explore.html",controller:"ExploreCtrl"}).when("/explore",{templateUrl:"views/explore.html",controller:"ExploreCtrl"}).when("/caves-karsts",{templateUrl:"views/caves-karsts.html",controller:"CavesKarstsCtrl"}).when("/conservation",{templateUrl:"views/conservation.html",controller:"ConservationCtrl"}).when("/springs",{templateUrl:"views/springs.html",controller:"SpringsCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("aquiferiumApp").controller("NavigationCtrl",["$scope","$location",function(a,b){a.isCollapsed=!0,a.$on("$routeChangeSuccess",function(){a.isCollapsed=!0}),a.logLocation=function(){console.log(b.$$path)},a.getClass=function(a){return"/"===a&&"/"===b.path()?"active":b.path().substr(0,a.length)===a?"active":void 0}}]),angular.module("aquiferiumApp").controller("ExploreCtrl",["$scope",function(a){a.pageClass="explore"}]),angular.module("aquiferiumApp").controller("CavesKarstsCtrl",["$scope","$location","$anchorScroll",function(a,b,c){a.pageClass="caves-karsts",a.resetView=function(){b.hash(".caveskarsts"),c()},a.resetView(),a.goToByScroll=function(a){var b=$("#navbar").innerHeight(),c=angular.element(document).find("body").css("class",".caveskarsts");c.animate({scrollTop:$('.slide[data-slide="'+a+'"]').offset().top-b},2e3,"easeInOutQuint")},a.buttonClick=function(b){b.preventDefault();var c=angular.element(b.target).attr("data-slide");a.goToByScroll(c)}}]),angular.module("aquiferiumApp").controller("ConservationCtrl",["$scope","$location","$anchorScroll",function(a,b,c){a.pageClass="conservation",a.resetView=function(){b.hash(".conservation"),c()},a.resetView(),a.goToByScroll=function(a){var b=$("#navbar").innerHeight(),c=angular.element(document).find("body").css("class",".conservation");c.animate({scrollTop:$('.slide[data-slide="'+a+'"]').offset().top-b},2e3,"easeInOutQuint")},a.buttonClick=function(b){b.preventDefault();var c=angular.element(b.target).attr("data-slide");a.goToByScroll(c)},a.randomColor=function(){var a="#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6);return a}}]),angular.module("aquiferiumApp").controller("SpringsCtrl",["$window","$scope","$location","$anchorScroll",function(a,b,c,d){b.pageClass="springs",b.hcpurl="http://eahcp.org/index.php/about_eahcp/covered_species",b.trustUrl=function(a){return $sce.trustAsResourceUrl(a)},b.resetView=function(){c.hash(".springs"),d()},b.resetView(),b.goToByScroll=function(a){var b=$("#navbar").innerHeight(),c=angular.element(document).find("body").css("class",".springs");c.animate({scrollTop:$('.slide[data-slide="'+a+'"]').offset().top-b},2e3,"easeInOutQuint")},b.buttonClick=function(a){console.log("firing click event from controller $scope with e == "+a.valueOf()),a.preventDefault();var c=angular.element(a.target).attr("data-slide");b.goToByScroll(c)},b.linkModelFunc=function(b){console.log("link model function"),a.open(b)}}]),angular.module("aquiferiumApp").controller("AboutCtrl",["$scope",function(a){a.pageClass="about",a.code="SUhtSnl_ZRM"}]),angular.module("aquiferiumApp").controller("ContactCtrl",["$scope",function(a){a.pageClass="contact"}]),angular.module("d3-map",[]).directive("eaaAquifersMap",function(){function a(a,b){function c(){var a="#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6);return a}function d(a){return x=d3.select(this),"hidden"===A.style("visibility")?(x.moveToFront().transition().duration(v).attr("r",u).style("stroke-width","3px").style("stroke","#ff0"),w=a,y=x,A.style("visibility","visible").html("<h2>"+a.Location+'</h2><br/><img src="'+(r+a.img)+'" alt="" /><br/><a href="../">Explore</a>')):"visible"===A.style("visibility")&&a!==w?(y.transition().duration(v).attr("r",t).style("stroke-width","1px").style("stroke","#000"),y.moveToBack(),x.moveToFront().transition().duration(v).attr("r",u).style("stroke-width","3px").style("stroke","#ff0"),w=a,y=x,A.style("visibility","visible").html("<h2>"+a.Location+'</h2><br/><img src="'+(r+a.img)+'" alt="" /><br/><a href="../">Explore</a>')):(x.transition().duration(v).attr("r",t).style("stroke-width","1px").style("stroke","#000"),w={},y={},x={},A.style("visibility","hidden"))}var e=window,f=document,g=f.documentElement,h=f.getElementsByTagName("body")[0],i=e.innerWidth||g.clientWidth||h.clientWidth,j=e.innerHeight||g.clientHeight||h.clientHeight,k=.965,l=.65,m=i*k,n=j*l,o="data/geojson/NEW_major_aquifers_dd_reduced100.geo.json",p="data/geojson/eaa_boundary_EPSG-3081.geo.json",q="data/eaaAquiferium-allSprings-markerData.csv",r="../../images/d3map/",s={top:0,right:0,bottom:0,left:0},t=(m-s.left-s.right,n-s.top-s.bottom,5),u=20,v=250,w={},x={},y={},z=b[0],A=d3.select(z).append("div").attr("class","tooltip"),B=(d3.select(z).append("div").attr("class","map"),d3.select(".map").append("svg").attr("height",n).attr("class","mapSvg")),C=B.append("g").attr("class","texas"),D=B.append("g").attr("class","boundaries");d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var a=this.parentNode.firstChild;a&&this.parentNode.insertBefore(this,a)})},d3.json(o,function(a,b){if(a)return console.error(a);var e=4*n,f=[m/2,n/2],g=d3.geo.centroid(b),h=d3.geo.mercator().scale(e).center(g).translate(f),i=d3.geo.path().projection(h),j=C.selectAll("g").data(b.features).enter().append("g");j.append("path").attr("d",i).attr("class","area").attr("fill","#425968").attr("stroke","#4298B5"),d3.json(p,function(a,b){if(a)return console.error(a);var e=D.selectAll("g").data(b.features).enter().append("g");e.append("path").attr("d",i).attr("class","area").attr("fill","#8F8100").attr("stroke","#000");var f=e.append("g");d3.csv(q,function(a,b){return a?console.error(a):void f.selectAll("circle").data(b).enter().append("circle").attr("cx",function(a){return h([a.lon_ddd,a.lat_ddd])[0]}).attr("cy",function(a){return h([a.lon_ddd,a.lat_ddd])[1]}).attr("r",t).attr("z-index",0).style("fill",function(){return c()}).style("stroke","#000").on("click",d)})})})}return{restrict:"E",replace:!1,link:a}}),angular.module("d3-visualizations",[]).directive("eaaAquifersBoundaryMap",function(){var a={compile:!1,controller:!1,controllerAs:!1,link:!1,priority:0,require:!1,restrict:"E",scope:!1,template:!1,templateUrl:!1,terminal:!1,transclude:!1,type:!1};return a.compile=function(){var a=function(a,b){function c(){var a="#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6);return a}function d(a){return w=d3.select(this),"hidden"===z.style("visibility")?(w.moveToFront().transition().duration(u).attr("r",t).style("stroke-width","3px").style("stroke","#ff0"),v=a,x=w,z.style("visibility","visible").html("<h2>"+a.Location+'</h2><br/><img src="'+(q+a.img)+'" alt="" /><br/><a href="../">Explore</a>')):"visible"===z.style("visibility")&&a!==v?(x.moveToBack().transition().duration(u).attr("r",s).style("stroke-width","1px").style("stroke","#000"),w.moveToFront().transition().duration(u).attr("r",t).style("stroke-width","3px").style("stroke","#ff0"),v=a,x=w,z.style("visibility","visible").html("<h2>"+a.Location+'</h2><br/><img src="'+(q+a.img)+'" alt="" /><br/><a href="../">Explore</a>')):(w.transition().duration(u).attr("r",s).style("stroke-width","1px").style("stroke","#000"),v={},x={},w={},z.style("visibility","hidden"))}var e=window,f=document,g=f.documentElement,h=f.getElementsByTagName("body")[0],i=e.innerWidth||g.clientWidth||h.clientWidth,j=e.innerHeight||g.clientHeight||h.clientHeight,k=.965,l=.65,m=i*k,n=j*l,o="data/geojson/eaa_boundary_EPSG-3081.geo.json",p="data/eaaAquiferium-allSprings-markerData.csv",q="../../images/d3map/",r={top:0,right:0,bottom:0,left:0},s=(m-r.left-r.right,n-r.top-r.bottom,8),t=20,u=250,v={},w={},x={},y=b[0],z=d3.select(y).append("div").attr("class","tooltip"),A=(d3.select(y).append("div").attr("class","map"),d3.select(".map").append("svg").attr("height",n).attr("class","mapSvg")),B=A.append("g").attr("class","boundaries");d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var a=this.parentNode.firstChild;a&&this.parentNode.insertBefore(this,a)})},d3.json(o,function(a,b){if(a)return console.error(a);var e=24*n,f=[m/2,n/2],g=d3.geo.centroid(b),h=d3.geo.mercator().scale(e).center(g).translate(f),i=d3.geo.path().projection(h),j=B.selectAll("g").data(b.features).enter().append("g");j.append("path").attr("d",i).attr("class","area").attr("fill","#8F8100").attr("stroke","#000");var k=j.append("g");d3.csv(p,function(a,b){return a?console.error(a):void k.selectAll("circle").data(b).enter().append("circle").attr("cx",function(a){return h([a.lon_ddd,a.lat_ddd])[0]}).attr("cy",function(a){return h([a.lon_ddd,a.lat_ddd])[1]}).attr("r",s).attr("z-index",0).style("fill",function(){return c()}).style("stroke","#000").on("click",d)})})};return a},console.log("directiveDefinitionObject: ",a),a});